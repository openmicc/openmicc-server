# define the data center we will create the server and all related resources in
# see the section below "Listing available data centers" for more details
data "kamatera_datacenter" "california" {
  country = "United States"
  name    = "Santa Clara"
}

# create a private network to use with the server
resource "kamatera_network" "my_private_network" {
  # the network must be in the same datacenter as the server
  datacenter_id = "US-SC"
  name          = "my-private-network"

  # # define multiple subnets to use in this network
  # # this subnet shows full available subnet configurations
  # # the subnet below shows a more minimal example
  # subnet {
  #   ip          = "172.16.0.0"
  #   bit         = 23
  #   description = "my first subnet"
  #   dns1        = "1.2.3.4"
  #   dns2        = "5.6.7.8"
  #   gateway     = "172.16.0.100"
  # }

  # a subnet with just the minimal required configuration
  subnet {
    ip  = "192.168.0.0"
    bit = 23
  }
}

# SSH key to connect to docker
resource "tls_private_key" "ssh_key" {
  algorithm = "RSA"
  rsa_bits  = 4096
}

data "kamatera_image" "ubuntu_1804" {
  datacenter_id = "US-SC"
  # code          = "docker-ready-ubuntuserver-22.04"
  os   = "Ubuntu"
  code = "18.04 64bit"
}
